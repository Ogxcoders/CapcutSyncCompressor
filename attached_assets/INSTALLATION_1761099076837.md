# Installation Instructions

## Important Note

**This is a WordPress plugin**, not a standalone web application. It must be installed in an existing WordPress site to function.

## Requirements

- **WordPress**: Version 5.8 or higher
- **PHP**: Version 7.4 or higher
- **Composer**: For installing Appwrite SDK
- **Appwrite Account**: With database and collection configured
- **Server B**: External video compression service

## Installation Steps

### Step 1: Copy Plugin to WordPress

Copy the `capcut-video-sync` folder to your WordPress plugins directory:

```bash
# Option A: Via command line
cp -r capcut-video-sync /path/to/your/wordpress/wp-content/plugins/

# Option B: Via FTP/SFTP
# Upload the entire capcut-video-sync folder to:
# your-wordpress/wp-content/plugins/
```

### Step 2: Install Composer Dependencies

Navigate to the plugin directory and install dependencies:

```bash
cd /path/to/your/wordpress/wp-content/plugins/capcut-video-sync
composer install
```

This will install the Appwrite PHP SDK in the `vendor` folder.

### Step 3: Activate Plugin in WordPress

1. Log in to your WordPress admin panel
2. Go to **Plugins → Installed Plugins**
3. Find **CapCut Video Sync** in the list
4. Click **Activate**

### Step 4: Configure Appwrite

1. Go to **Settings → Video Sync**
2. Enter your Appwrite credentials:
   - **Endpoint**: `https://cloud.appwrite.io/v1` (or your self-hosted URL)
   - **Project ID**: Your Appwrite project ID
   - **API Key**: API key with Database read/write permissions
   - **Database ID**: `video_compression` (or your database ID)
   - **Collection ID**: `capcut_templates` (or your collection ID)
3. Enter your **Server B Public URL** where compressed videos are served
4. Click **Save Settings**
5. Click **Test Connection** to verify Appwrite connectivity

### Step 5: Set Up Appwrite Collection

In your Appwrite console, create a collection with these attributes:

| Attribute Name | Type | Required | Size/Format |
|----------------|------|----------|-------------|
| `wp_post_id` | Integer | Yes | - |
| `title` | String | Yes | 255 |
| `slug` | String | Yes | 255 |
| `author_name` | String | No | 100 |
| `post_date` | DateTime | Yes | - |
| `original_video_url` | String | Yes | 500 |
| `poster_url` | String | No | 500 |
| `compression_status` | String | Yes | 50 |
| `processing_step` | String | No | 100 |
| `master_playlist_url` | String | No | 500 |
| `high_quality_url` | String | No | 500 |
| `medium_quality_url` | String | No | 500 |
| `low_quality_url` | String | No | 500 |
| `error_message` | String | No | 500 |

**Important**: Create a **unique index** on the `wp_post_id` attribute.

### Step 6: Start Using

1. Go to **CapCut Templates → Add New**
2. Create a template with a poster image URL and video URL
3. Publish the post
4. The plugin will automatically sync with Appwrite
5. Use the `[capcut_video]` shortcode to display videos

## Troubleshooting

### Plugin doesn't appear in WordPress

- Make sure the folder is named `capcut-video-sync`
- Make sure it's in `wp-content/plugins/`
- Check file permissions (644 for files, 755 for directories)

### "Appwrite not connected" error

- Verify your credentials in Settings → Video Sync
- Click "Test Connection" to diagnose
- Check that Composer dependencies are installed
- Ensure `vendor/` folder exists in plugin directory

### Custom post type doesn't appear

- Deactivate and reactivate the plugin
- Go to Settings → Permalinks and click "Save Changes"
- Check for PHP errors in WordPress debug log

### Videos not syncing

- Check Appwrite collection is created with correct attributes
- Verify API key has Database read/write permissions
- Enable debug logs in Settings → Video Sync
- Check WordPress debug.log for errors

## Development/Testing Setup

If you're developing or testing this plugin locally:

```bash
# 1. Set up local WordPress (using Local, MAMP, or similar)

# 2. Navigate to plugins directory
cd /path/to/local/wordpress/wp-content/plugins/

# 3. Clone or copy this plugin
cp -r /path/to/capcut-video-sync ./

# 4. Install dependencies
cd capcut-video-sync
composer install

# 5. Activate in WordPress admin and configure settings
```

## Support

For issues and questions, refer to the README.md documentation.
